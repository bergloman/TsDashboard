/*! tsdash 2016-12-23 */
function TsDashboard(a,b){this.driver=b,this.div_id=a,this.init(),this.regex_date=/^(?:19|20)[0-9]{2}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-9])|(?:(?!02)(?:0[1-9]|1[0-2])-(?:30))|(?:(?:0[13578]|1[02])-31))$/,this.regex_datetime=/^(?:19|20)[0-9]{2}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-9])|(?:(?!02)(?:0[1-9]|1[0-2])-(?:30))|(?:(?:0[13578]|1[02])-31)) (0[0-9]|1[0-9]|2[0-3])(:[0-5][0-9]){2}$/,this.driver.registerView&&this.driver.registerView(this)}function getFriendlyTimeSlotLabel(a){if(null!=a){for(var b=0,c=[{n:1e3,t:"sec"},{n:6e4,t:"min"},{n:36e5,t:"h"},{n:864e5,t:"day"}];b<c.length&&a/c[b].n>=1;)b++;return b--,b=Math.max(0,b),y_label="per "+a/c[b].n+" "+c[b].t,y_label}return null}function TsDashboardDummyDriver(a,b){this.view_definition=a,this.data=b,this.view_object=null}TsDashboard.prototype.onParamChange=function(a){self.driver.onParamChange&&self.driver.onParamChange(a)},TsDashboard.prototype.init=function(){var a=this;a.driver.getViewDefinition(function(b){a.conf=b,a.conf.parameters=a.conf.parameters||[],a.top=$("#"+a.div_id),a.top.addClass("tsd"),a.conf.hide_sidebar?a.top.append("<div class='tsd-main' id='tsd_main'></div>"):(a.top.append("<div class='tsd-sidebar dark-matter'></div>"),a.top.append("<div class='tsd-main' id='tsd_main'></div>"),a.conf.sidebar_width=a.conf.sidebar_width||190,$(".tsd-sidebar").width(a.conf.sidebar_width),$(".tsd-main").css("margin-left",+a.conf.sidebar_width+"px"),b.title&&$(".tsd-sidebar").append("<h1>"+b.title+"</h1>"),a.initParams()),$(".tsd-main").append("<div role='alert'' class='tsd-error alert alert-danger'>...</div>"),$(".tsd-main").append("<div class='tsd-main-content' id='tsd_main_content'></div>"),$(".tsd-main").append("<div class='modal' id='divModal' tabindex='-1' role='dialog' aria-labelledby='myModalLabel' aria-hidden='true'>                <div class='modal-dialog'>                    <div class='modal-content'>                        <div class='modal-header'>                            <button type='button' class='close' data-dismiss='modal' aria-hidden='true'>&times;</button>                            <h4 class='modal-title' id='myModalLabel'>                            <span data-bind='text: modal_title'></span>                            </h4>                        </div>                        <div class='modal-body'>                            <div id='divModalChart'></div>                        </div>                    </div>                </div>            </div>"),a.conf.hide_sidebar&&a.run()})},TsDashboard.prototype.getParamValue=function(a){return $("#in"+a).val()},TsDashboard.prototype.setParamValue=function(a,b){var c=this;for(var d in c.conf.parameters)(function(d){var e=c.conf.parameters[d];e.name==a&&("boolean"===e.type?(label.append("<input type='checkbox' id='cb"+e.name+"'></input>"),e.default&&$("#cb"+e.name).attr("checked","true")):$("#in"+e.name).val(b))})(d)},TsDashboard.prototype.resetErrorMsg=function(){$(".tsd-error").removeClass("tsd-error-visible")},TsDashboard.prototype.showErrorMsg=function(a){$(".tsd-error").text(a),$(".tsd-error").addClass("tsd-error-visible")},TsDashboard.prototype.showError=function(a){var b=this,c=a.message;b.showErrorMsg(c)},TsDashboard.prototype.getToday=function(){return moment({hour:0}).toDate()},TsDashboard.prototype.getTimeString=function(a){return a||(a=new Date),moment(a).format("YYYY-MM-DD hh:mm:ss")},TsDashboard.prototype.getDateString=function(a){return a||(a=new Date),moment(a).format("YYYY-MM-DD")},TsDashboard.prototype.initParams=function(){for(var a=this,b=$(".tsd-sidebar"),c=0;c<a.conf.parameters.length;c++)(function(c){var d=a.conf.parameters[c],e=$(document.createElement("div"));e.appendTo(b),e.addClass("tsd-sidebar-param"),e.append("<span>"+d.title+"</span>"),"string"===d.type?(e.append("<input id='in"+d.name+"'></input>"),d.default&&$("#in"+d.name).val(d.default)):"datetime"===d.type?(e.append("<input id='in"+d.name+"' placeholder='yyyy-mm-dd hh:MM:ss'></input>"),$("#in"+d.name).blur(function(){var b=$("#in"+d.name).val();a.regex_date.test(b)&&$("#in"+d.name).val(b+" 00:00:00")}),e.append("<a id='hin_now_"+d.name+"' class='tsd-input-help'>Now</a> "),$("#hin_now_"+d.name).click(function(){$("#in"+d.name).val(a.getTimeString())}),e.append("<a id='hin_today_"+d.name+"' class='tsd-input-help'>Today</a> "),$("#hin_today_"+d.name).click(function(){$("#in"+d.name).val(a.getDateString()+" 00:00:00")}),d.default&&(d.default instanceof Date?$("#in"+d.name).val(a.getTimeString(d.default)):"$now"==d.default?$("#in"+d.name).val(a.getTimeString()):"$today"==d.default?$("#in"+d.name).val(a.getDateString()+" 00:00:00"):$("#in"+d.name).val(d.default))):"date"===d.type?(e.append("<input id='in"+d.name+"' placeholder='yyyy-mm-dd'></input>"),e.append("<a id='hin_today_"+d.name+"' class='tsd-input-help'>Today</a> "),$("#hin_today_"+d.name).click(function(){$("#in"+d.name).val(a.getDateString())}),d.default&&(d.default instanceof Date?$("#in"+d.name).val(a.getDateString(d.default)):"$now"==d.default?$("#in"+d.name).val(a.getDateString()):"$today"==d.default?$("#in"+d.name).val(a.getDateString()):$("#in"+d.name).val(d.default))):"filter"===d.type?(e.append("<input id='in"+d.name+"'></input>"),e.append("<div id='opt"+d.name+"' class='tsd-match-options'></div>"),$("#in"+d.name).keyup(function(){var b=$("#in"+d.name).val(),c=void 0===d.search_min_len&&b.length<3||void 0!==d.search_min_len&&b.length<d.search_min_len;c||a.driver.getParamValues(d.name,b,function(a){$("#opt"+d.name).empty(),$("#opt"+d.name).show();for(var b=0;b<a.length;b++)(function(b){var c=$(document.createElement("div"));c.text(a[b]),c.click(function(){$("#in"+d.name).val(a[b]),$("#opt"+d.name).empty(),$("#opt"+d.name).hide()}),$("#opt"+d.name).append(c)})(b)})}),d.default&&$("#in"+d.name).val(d.default)):"enum"===d.type||"dropdown"===d.type?(e.append("<select id='in"+d.name+"'></select >"),a.driver.getParamValues(d.name,null,function(a){for(var b=0;b<a.length;b++){var c,e,f=a[b];"enum"==d.type?(c=f.value,e=f.caption):(c=f.name,e=f.name),$("#in"+d.name).append("<option value='"+c+"'>"+e+"</option>")}d.default&&$("#in"+d.name).val(d.default)})):"boolean"===d.type&&(e.append("<input type='checkbox' id='in"+d.name+"'></input>"),d.default&&$("#in"+d.name).attr("checked","true")),$("#in"+d.name).change(function(){a.onParamChange(d.name)})})(c);var d=$(document.createElement("button"));d.text("Run"),d.click(function(){a.run()}),d.appendTo(b)},TsDashboard.prototype.collectParameterValues=function(){var a=this,b=[];for(var c in a.conf.parameters){var d=a.conf.parameters[c],e={name:d.name};if("string"===d.type){if(e.value=$("#in"+d.name).val().trim(),!d.optional&&""===e.value)return a.showErrorMsg("Missing non-optional parameter: "+d.title),null}else if("datetime"===d.type){if(e.value=$("#in"+d.name).val(),!d.optional&&null===e.value)return a.showErrorMsg("Missing non-optional parameter: "+d.title),null;if(!a.regex_datetime.test(e.value)){if(!a.regex_date.test(e.value))return a.showErrorMsg("Invalid date format or value: "+d.title),null;e.value+=" 00:00:00"}e.value=moment(e.value,"YYYY-MM-DD HH:mm:ss").toDate()}else if("date"===d.type){if(e.value=$("#in"+d.name).val(),!d.optional&&null===e.value)return a.showErrorMsg("Missing non-optional parameter: "+d.title),null;if(!a.regex_date.test(e.value))return a.showErrorMsg("Invalid date format or value: "+d.title),null;e.value=moment(e.value,"YYYY-MM-DD").toDate()}else if("filter"===d.type){if(e.value=$("#in"+d.name).val(),!d.optional&&null===e.value)return a.showErrorMsg("Missing non-optional parameter: "+d.title),null}else if("enum"===d.type){if(e.value=$("#sel"+d.name).val(),!d.optional&&null===e.value)return a.showErrorMsg("Missing non-optional parameter: "+d.title),null}else if("dropdown"===d.type){if(e.value=$("#in"+d.name).val(),null===e.value)return a.showErrorMsg("Missing non-optional parameter: "+d.title),null}else"boolean"===d.type&&(e.value=!1,$("#cb"+d.name).attr("checked")&&(e.value=!0));b.push(e)}return b},TsDashboard.prototype.run=function(){var a=this,b=$("#tsd_main_content");b.empty(),a.resetErrorMsg();var c=a.collectParameterValues();if(c){var d={conf:a.conf,params:c};a.driver.getDrawData(d,function(c,d){if(null!=c&&a.showError(c),void 0==d)return void a.showErrorMsg("No data available.");for(var e=1,f=0;f<a.conf.blocks.length;f++){var g=a.conf.blocks[f],h=$(document.createElement("div"));b.append(h),h.addClass("tsd-block"),g.title&&g.title.length>0&&h.append($(document.createElement("h2")).text(g.title));var i=$(document.createElement("div"));i.addClass("tsd-block-inner"),h.append(i);for(var j="tsd-col-1-"+g.panels.length,k=0;k<g.panels.length;k++){var l=g.panels[k],m=$(document.createElement("div"));i.append(m),m.addClass("tsd-panel"),m.addClass(j),l.title&&l.title.length>0&&m.append($(document.createElement("h3")).text(l.title));for(var n=0;n<l.widgets.length;n++){var o=l.widgets[n];o.type=o.type||"timeseries",o.timepoints=o.timepoints||[];var p=$(document.createElement("div"));m.append(p),p.addClass("tsd-widget"),o.title&&o.title.length>0&&p.append($(document.createElement("h3")).text(o.title));var q="tsd_widget_"+e;if(p.append($(document.createElement("div")).attr("id",q).attr("class","tsd-widget-sub")),e++,"timeseries"==o.type){if(void 0==d||void 0==d.timeseries||0==d.timeseries.length){a.showErrorMsg("Time series data not available.");continue}var r=[],s=o.timeseries.map(function(a){for(var b=0;b<d.timeseries.length;b++){var c=d.timeseries[b];if(c.name===a)return c.values}return null});r=s.filter(function(a){return null!==a});var t=[];t=o.timepoints.map(function(a){for(var b=0;b<d.timepoints.length;b++){var c=d.timepoints[b];if(c.name===a)return c.values}return null}).filter(function(a){return null!==a});var u={chart_div:"#"+q,data:r,timepoints:t,xdomain:d.timeseries[0].xdomain,height:o.height,handle_clicks:!0,y_axis_label:getFriendlyTimeSlotLabel(d.timeseries[0].slot_length)};u.click_callback=function(b){return function(){a.showModal(b)}}(u),o.options&&Object.assign(u,o.options),a.drawTimeSeriesMulti(u)}else if("histogram"==o.type){if(void 0==d||void 0==d.dataseries||0==d.dataseries.length){a.showErrorMsg("Histogram data not available.");continue}var r=[];r=o.dataseries.map(function(a){for(var b=0;b<d.dataseries.length;b++){var c=d.dataseries[b];if(c.name===a)return c.values}return null}).filter(function(a){return null!==a});var u={chart_div:"#"+q,data:r[0],xdomain:d.dataseries[0].xdomain,height:o.height,handle_clicks:!0};u.click_callback=function(b){return function(){a.showModalColumnChart(b)}}(u),o.options&&Object.assign(u,o.options),a.drawColumnChart(u)}else if("scatterplot"==o.type){var r=[];if(void 0==d||void 0==d.scatterseries||0==d.scatterseries.length){a.showErrorMsg("Scatter plot data not available.");continue}r=o.scatterseries.map(function(a){for(var b=0;b<d.scatterseries.length;b++){var c=d.scatterseries[b];if(c.name===a)return c.values}return null}).filter(function(a){return null!==a});var u={chart_div:"#"+q,data:r[0],height:o.height,handle_clicks:!0};u.click_callback=function(b){return function(){a.showModalScatterPlot(b)}}(u),o.options&&Object.assign(u,o.options),a.drawScatterPlot(u)}else if("table"==o.type){var r=[],v="dataseries";if(o.timeseries&&(v="timeseries"),void 0==d||void 0==d[v]||0==d[v].length){a.showErrorMsg("Table data not available.");continue}r=o[v].map(function(a){for(var b=0;b<d[v].length;b++){var c=d[v][b];if(c.name===a)return c.values}return null}).filter(function(a){return null!==a});var u={chart_div:"#"+q,data:r,height:o.height,handle_clicks:!1};u.click_callback=function(b){return function(){a.showModal(b)}}(u),o.options&&Object.assign(u,o.options),a.drawTable(u)}else if("kpi"==o.type){var r=o.dataseries.map(function(a){for(var b in d.dataseries){var c=d.dataseries[b];if(c.name===a)return c.values}return null}).filter(function(a){return null!==a}),u={kpi_div:"#"+q,data:r[0],height:o.height,handle_clicks:!1};o.options&&Object.assign(u,o.options),a.drawKpi(u)}else if("graph"==o.type){var w={},v="graphs";if(w=o[v].map(function(a){for(var b in d[v]){var c=d[v][b];if(c.name===a)return c.values}return null}).filter(function(a){return null!==a}),void 0==d||void 0==d[v]||0==d[v].length){a.showErrorMsg("Graph data not available.");continue}var x=[];v="dataseries",o[v]&&(x=o[v].map(function(a){for(var b in d[v]){var c=d[v][b];if(c.name===a)return c.values}return null}).filter(function(a){return null!==a}));var u=(w[0].nodes,{chart_div:"#"+q,pred:x,graph:w,alerts:x,start:d.graphs[0].d1,end:d.graphs[0].d2,handle_clicks:!1});o.options&&Object.assign(u,o.options),a.drawTemporalGraph(u)}else if("swimlane"==o.type){var v="dataseries";if(dataseries=o[v].map(function(a){for(var b in d[v]){var c=d[v][b];if(c.name===a)return c.values}return null}).filter(function(a){return null!==a}),void 0==d||void 0==d[v]||0==d[v].length){a.showErrorMsg("Swimlane data not available.");continue}var u={chart_div:"#"+q,data:dataseries,start:d[v][0].d1,end:d[v][0].d2,handle_clicks:!1};o.options&&Object.assign(u,o.options),a.drawSwimlaneChart(u)}else if("sparkline"==o.type){if(void 0==d||void 0==d.timeseries||0==d.timeseries.length){a.showErrorMsg("Sparkline data not available.");continue}for(var r=[],y=0;y<o.sparklines.length;y++)for(var z=0;z<d.timeseries.length;z++){var A=d.timeseries[z];A.name===o.sparklines[y]&&r.push(A)}r.sort(function(a,b){return a.idx>b.idx});var u={chart_div:"#"+q,data:r,handle_clicks:!0};u.click_callback=function(b){return function(){a.showModal(b)}}(u),o.options&&Object.assign(u,o.options),a.drawSparklineTable(u)}else console.log("Widget type is not defined: "+o.type)}}}})}},TsDashboard.prototype.showModal=function(a){var b=this;$("#divModal").on("shown.bs.modal",function(c){a.chart_div="#divModalChart",a.height=800,a.handle_clicks=!0,a.click_callback=function(){},b.drawTimeSeriesMulti(a)}),$("#divModal").modal()},TsDashboard.prototype.showModalColumnChart=function(a){var b=this;$("#divModal").on("shown.bs.modal",function(c){a.chart_div="#divModalChart",a.height=500,a.handle_clicks=!1,a.click_callback=function(){},b.drawColumnChart(a)}),$("#divModal").modal()},TsDashboard.prototype.showModalScatterPlot=function(a){var b=this;$("#divModal").on("shown.bs.modal",function(c){a.chart_div="#divModalChart",a.height=500,a.handle_clicks=!1,a.click_callback=function(){},b.drawScatterPlot(a)}),$("#divModal").modal()},TsDashboard.prototype.toNiceDateTime=function(a){return a?moment(a).format("YYYY-MM-DD HH:mm:ss"):"-"},TsDashboard.prototype.drawTimeSeriesMulti=function(a){var b=this,c={chart_div:"#someChart",data:null,bands:null,height:100,xaccessor:function(a){return null==a?null:a.epoch},yaccessor:function(a){return null==a?null:a.val},xdomain:null,xdomain_min:null,xdomain_max:null,ydomain:null,ydomain_min:null,ydomain_max:null,xcaption:null,ycaptions:null,series_style_indices:null,handle_clicks:!1,show_grid:!0,x_axis_label:null,y_axis_label:null,graph_css:"area",xAxisFontSize:"14px",yAxisFontSize:"14px",xAxisTicks:7,yFormatValue:".2s",yAxisTicks:null,tickNumber:function(a,b){return Math.min(a<100?3:8,b)},markerStroke:3,markerOpacity:.4,markerOpacityHover:.8,markerColor:"#ff0000",click_callback:null,timepoints:null,timepoint_callback:null,margin_top:18,margin_right:35,margin_bottom:20,margin_left:50};if("undefined"!==a)for(var d in a)c[d]=a[d];if(!c.xdomain){var e=c.data.map(function(a){return d3.extent(a,c.xaccessor)}),f=[];e.forEach(function(a){f=f.concat(a)}),c.xdomain=d3.extent(f)}if(!c.ydomain){var e=c.data.map(function(a){return d3.extent(a,c.yaccessor)}),f=[];e.forEach(function(a){f=f.concat(a)}),c.ydomain=d3.extent(f)}null!==c.xdomain_min&&(c.xdomain[0]=c.xdomain_min),null!==c.xdomain_max&&(c.xdomain[1]=c.xdomain_max),null!==c.ydomain_min&&(c.ydomain[0]=c.ydomain_min),null!==c.ydomain_max&&(c.ydomain[1]=c.ydomain_max);var h=0;if(c.data.forEach(function(a){h+=a.length}),!c.series_style_indices){c.series_style_indices=[];for(var i=0;i<c.data.length;i++)c.series_style_indices.push(i)}$(c.chart_div).empty();var j={top:c.margin_top,right:c.margin_right,bottom:c.margin_bottom,left:c.margin_left};c.x_axis_label&&(j.bottom+=20);var k=$(c.chart_div).width()-j.left-j.right,l=c.height-j.top-j.bottom,m=(d3.time.format("%d-%b-%y").parse,d3.time.scale().domain(c.xdomain).range([0,k])),n=d3.scale.linear().domain(c.ydomain).range([l,0]),o=((m.domain()[1].getTime()-m.domain()[0].getTime())/1e3/60,d3.time.format.multi([[".%L",function(a){return a.getMilliseconds()}],[":%S",function(a){return a.getSeconds()}],["%H:%M",function(a){return a.getMinutes()}],["%H:%M",function(a){return a.getHours()}],["%d %b",function(a){return a.getDay()&&1!=a.getDate()}],["%d %b",function(a){return 1!=a.getDate()}],["%d %b",function(a){return a.getMonth()}],["%d %b %Y",function(){return!0}]])),p=d3.svg.axis().scale(m).orient("bottom").ticks(c.xAxisTicks).tickFormat(o);c.show_grid&&p.innerTickSize(-l).outerTickSize(0).tickPadding(10);var q=d3.format(c.yFormatValue),r=c.tickNumber(l,c.ydomain[1]);null!=c.yAxisTicks&&(r=c.yAxisTicks);for(var s=[],i=1;i<=r;i++)s.push(c.ydomain[0]+i*(c.ydomain[1]-c.ydomain[0])/(r+1));var t=d3.svg.axis().scale(n).tickValues(s).tickFormat(function(a){return q(a)}).orient("left");c.show_grid&&t.innerTickSize(-k).outerTickSize(0).tickPadding(10);var u=d3.svg.line().x(function(a){return m(c.xaccessor(a))}).y(function(a){return n(c.yaccessor(a))}),v=d3.svg.area().x(function(a){return m(c.xaccessor(a))}).y0(function(a){return n(a.val0)}).y1(function(a){return n(a.val1)}),w=d3.select(c.chart_div).append("svg").attr("width",k+j.left+j.right).attr("height",l+j.top+j.bottom).append("g").attr("transform","translate("+j.left+","+j.top+")");if(c.bands)for(var i=0;i<c.bands.length;i++){for(var x=[],y=c.data[c.bands[i].ref],z=c.data[c.bands[i].lower],A=c.data[c.bands[i].upper],B=(c.series_style_indices[c.bands[i].ref],0);B<z.length;B++)x.push({val0:z[B].val,val1:A[B].val,epoch:z[B].epoch});w.append("path").style("fill","white").style("fill-opacity",.2).style("stroke","none").attr("fill","white").attr("d",v(x))}for(var i=0;i<c.data.length;i++){var y=c.data[i];w.append("path").attr("class","series series"+c.series_style_indices[i]).attr("d",u(y))}w.append("g").attr("class","x axis").attr("transform","translate(0, "+l+")").style("font-size",c.xAxisFontSize).call(p),g=w.append("g").attr("class","y axis").style("font-size",c.yAxisFontSize).call(t),null!=c.x_axis_label&&w.append("text").attr("class","x label").attr("text-anchor","end").attr("x",k-10).attr("y",l+j.top+16).text(c.x_axis_label),null!=c.y_axis_label&&w.append("text").attr("class","y label").attr("text-anchor","end").attr("y",6).attr("dy",".75em").attr("transform","rotate(-90)").text(c.y_axis_label);var C=d3.select(c.chart_div).append("div").attr("class","line-chart-tooltip").attr("id",c.chart_div+"_tooltip").style("opacity",0);if(c.handle_clicks){var D=function(a){for(var b=d3.mouse(a),d=m.invert(b[0]),e=n.invert(b[1]),f=null,g=null,h=0;h<c.data.length;h++){var i,j=d3.bisector(c.xaccessor).left,k=j(c.data[h],d),l=c.data[h][k];i=0==k||1==c.data[h].length||k>=c.data[h].length?l:c.data[h][k-1];var o,p;null!=i&&(o=c.xaccessor(i)),null!=l&&(p=c.xaccessor(l));var q=d.getTime()-o>p-d.getTime()?l:i,r=c.yaccessor(q);(!g||Math.abs(g-e)>Math.abs(r-e))&&(g=r,f=q)}return f};g.on("click",function(){if(c.click_callback){var a=D(this);c.click_callback(a.epoch)}});var E=g.append("g").style("display","none");E.append("line").attr("id","focusLineX").attr("class","focusLine").style("stroke-dasharray","5, 3"),E.append("line").attr("id","focusLineY").attr("class","focusLine").style("stroke-dasharray","5, 3"),E.append("circle").attr("id","focusCircle").attr("r",5).attr("class","circle focusCircle"),g.append("rect").attr("class","overlay").attr("width",k).attr("height",l).on("mouseover",function(){E.style("display",null)}).on("mouseout",function(){E.style("display","none"),C.style("opacity",0)}).on("mousemove",function(){var a=D(this);if(null!=a){var d=m(new Date(c.xaccessor(a))),e=n(c.yaccessor(a));E.style("display",null),C.style("opacity",.8),C.html(c.yaccessor(a).toFixed(4)+"<br/>"+b.toNiceDateTime(c.xaccessor(a))).style("left",d-10+"px").style("top",e+40+"px"),E.select("#focusCircle").attr("cx",d).attr("cy",e),E.select("#focusLineX").attr("x1",d).attr("y1",n(n.domain()[0])).attr("x2",d).attr("y2",n(n.domain()[1])),E.select("#focusLineY").attr("x1",m(m.domain()[0])).attr("y1",e).attr("x2",m(m.domain()[1])).attr("y2",e)}})}if(c.timepoints&&c.timepoints.length>0)for(var B=0;B<c.timepoints.length;B++)for(var F=c.timepoints[B],i=0;i<F.length;i++){var G=F[i],H=G.title,I=G.epoch,J=b.toNiceDateTime(G.epoch),K=m(I);c.markerColor;!isNaN(K)&&K>0&&w.append("a").append("line").attr("id",K).attr("data:ts",J).attr("data:tt-title",H).attr("x1",K).attr("x2",K).attr("y1",0).attr("y2",c.height-j.top-j.bottom).attr("class","series"+B).style("stroke-width",c.markerStroke).style("opacity",c.markerOpacity).on("mouseover",function(a){var b=d3.select(this)[0][0].id,d=d3.select(this)[0][0].attributes[1].value,e=d3.select(this)[0][0].attributes[2].value;d3.select(this).style("opacity",1),C.style("opacity",c.markerOpacityHover),C.html(e+"<br/>"+d).style("left",b-70+"px").style("bottom",l+"px")}).on("mouseout",function(a){d3.select(this).style("opacity",c.markerOpacity),C.style("opacity",0)})}h<=0&&g.append("text").attr("x",k/2).attr("y",l/2).attr("dy","1em").attr("text-anchor","end").text("NO DATA!").attr("class","zerolinetext")},TsDashboard.prototype.drawTable=function(a){var b=this,c={chart_div:"#someChart",data:null,header:null,height:400,margin_bottom:60,column_widths:null,column_order:null,columns:null,sort_by_column:null,sort_asc:!0};if("undefined"!==a)for(var d in a)c[d]=a[d];$(c.chart_div).empty();var e=c.data[0],f=c.columns;if(!f){f=[];for(var g in e[0])f.push({source:g})}for(var h=$("<thead></thead>"),i=$("<tr></tr>"),j=0;j<f.length;j++)f[j].caption?i.append("<th>"+f[j].caption+"</th>"):i.append("<th>"+f[j].source+"</th>");null!==c.sort_by_column&&(c.sort_by_column in e[0]?e.sort(function(a,b){return c.sort_asc?a[c.sort_by_column]>b[c.sort_by_column]:a[c.sort_by_column]<b[c.sort_by_column]}):b.showErrorMsg("Cannot sort tabel by column: "+c.sort_by_column));for(var k=$("<tbody></tbody>"),j=0;j<e.length;j++){for(var l=$("<tr></tr>"),m=0;m<f.length;m++){var n=$("<td>"+e[j][f[m].source]+"</td>");f[m].width&&n.css("width",f[m].width),l.append(n)}k.append(l)}var o=$('<table class="table"></div>');h.append(i),o.append(h),o.append(k),$(c.chart_div).append(o),$(c.chart_div).css("overflow","auto"),$(c.chart_div).css("height",c.height),$(c.chart_div).css("margin-bottom",c.margin_bottom)},TsDashboard.prototype.drawKpi=function(a){var b={kpi_div:"#someKpi",data:null,header:null,height:100,margin_bottom:0,column_widths:null,column_order:null,filter:null};if("undefined"!==a)for(var c in a)b[c]=a[c];$(b.kpi_div).empty();for(var d=b.data,e=$("<tbody></tbody>"),f=$("<tr></tr>"),g=0;g<d.length;g++){var h=d[g],i=$("<td class='tsd-kpi-tile tsd-kpi-tile-ok' />");switch(h.status){case"ok":i.addClass("tsd-kpi-tile-ok");break;case"error":i.addClass("tsd-kpi-tile-error");break;case"warning":i.addClass("tsd-kpi-tile-warning");break;default:i.addClass("tsd-kpi-tile-inactive")}i.append("<div class='tsd-kpi-tile-title'></div>").text(h.name),i.append("<div class='tsd-kpi-tile-value'></div>").text(h.value),f.append(i)}e.append(f);var j=$("<table></table>");j.append(e),$(b.kpi_div).append(j)},TsDashboard.prototype.drawTemporalGraph=function(a){var b={chart_div:"#someChart",graph:null,alerts:null,start:null,end:null,height:400,min_node_size:5,max_node_size:5,min_edge_size:20,max_edge_size:20,node_color:"black",edge_color:"white",edge_off_color:"white",edge_opacity:.4,edge_off_opacity:.1,edge_selected_opacity:.8,node_opacity:.8,node_alert_opacity:1,node_off_opacity:.1,node_stroke:"white",default_node_size:5,default_edge_size:3,side_margin:20,duration:1e4,step_duration:200,unselected_opacity:.1,x_pos_att:"epoch",alert_node_opacity:1,alert_node_color:"red"};if("undefined"!==a)for(var c in a)b[c]=a[c];$(b.chart_div).empty(),$(b.chart_div).css("height",b.height);var d=d3.select(b.chart_div).append("svg").attr("x",0).attr("y",0).attr("width",$(b.chart_div).width()).attr("height",b.height),e=b.graph.length>0?b.graph[0]:[],f=b.alerts.length>0?b.alerts[0]:[],g=e.nodes,h=e.edges,i=b.x_pos_att,j=[],k=[],l=[],m=[],n=[],o=[];for(var p in g)g[p].color=b.node_color,g[p].color=b.node_opacity;for(var q=[],r=[],s=0;s<f.length;s++)"event_prediction"==f[s].src||"event_predictionalert"==f[s].src?(f[s].ts=Date.parse(f[s].ts),r.push(f[s])):q.push(f[s]);for(var s=0;s<q.length;s++)if("event"==q[s].src){var t=q[s].title.split(" ")[0];t in g&&(g[t].color=b.alert_node_color,g[t].opacity=b.node_alert_opacity)}for(var p in g)j.push(g[p][i]),k.push(g[p].y),l.push(g[p].epoch),n.push(g[p].size),m.push({id:p,options:g[p]});for(var s=0;s<h.length;s++)o.push(h[s].size);var u=d3.scale.linear().domain([d3.min(j),d3.max(j)]).range([b.side_margin,$(b.chart_div).width()-b.side_margin]);null!=b.start&&null!=b.end&&(u=d3.scale.linear().domain([b.start,b.end]).range([b.side_margin,$(b.chart_div).width()-b.side_margin]));var v=d3.scale.linear().domain([d3.min(k),d3.max(k)]).range([b.side_margin,$(b.chart_div).height()-b.side_margin]),w=(d3.scale.linear().domain([d3.min(n),d3.max(n)]).range([b.min_node_size,b.max_node_size]),d3.scale.linear().domain([d3.min(o),d3.max(o)]).range([b.min_edge_size,b.max_edge_size]),d3.scale.linear().domain([b.start,b.end]).range([0,b.duration])),x=d.selectAll("lines").data(h),y=[],z={};x.enter().append("path").attr("id",function(a,b){return y.push("edge-"+a.n1+"-"+a.n2),"edge-"+a.n1+"-"+a.n2}).attr("class","edge").attr("d",function(a){var b=0,c=0,d=v(g[a.n1].y),e=v(g[a.n2].y),f=parseInt(b)+parseInt((c-b)/2);return z["edge-"+a.n1+"-"+a.n2]={x1:b,x2:c,y1:d,y2:e},"M"+b+","+d+"C"+f+","+d+" "+f+","+e+" "+c+","+e}).style("fill","none").style("stroke-opacity",.1).style("stroke",b.edge_off_color).style("stroke-width",b.default_edge_size).transition().delay(function(a){return w(g[a.n2].epoch)}).attr("d",function(a){var b=u(g[a.n1][i]),c=u(g[a.n2][i]),d=v(g[a.n1].y),e=v(g[a.n2].y),f=parseInt(b)+parseInt((c-b)/2);return"M"+b+","+d+"C"+f+","+d+" "+f+","+e+" "+c+","+e}),d.selectAll(".edge").append("svg:title").text(function(a){return a.n1+"-"+a.n2});var A=d.selectAll("circles").data(m);A.enter().append("circle").attr("id",function(a,b){return"node-"+a.id}).attr("r",b.default_node_size).attr("cx",0).attr("cy",function(a){return v(a.options.y)}).attr("fill",function(a){return b.node_off_color}).attr("fill-opacity",function(a){return b.node_off_opacity}).attr("stroke-width",2).attr("stroke-opacity",b.node_off_opacity).attr("stroke",b.node_stroke).transition().delay(function(a){return w(a.options.epoch)}).attr("cx",function(a){return u(a.options[i])}).attr("fill-opacity",b.node_opacity),d.selectAll("circle").append("svg:title").text(function(a){return a.id+"\n"+new Date(a.options.epoch)}),d.selectAll("circle").on("mouseover",function(a,c){d.selectAll(".edge").style("stroke-opacity",function(c){return a.id!=c.n1&&a.id!=c.n2?b.edge_off_opacity:b.edge_selected_opacity})}).on("mouseout",function(a,c){d.selectAll(".edge").style("stroke-opacity",b.edge_opacity)}).on("click",function(a,c){window.open("/alerts#filter=&d1="+b.start+"&fd2="+b.end,"_blank")}),d.selectAll(".edge").on("mouseover",function(a,c){d.selectAll(".edge").style("stroke-opacity",function(c){return a.n1==c.n1&&a.n2==c.n2||a.n1==c.n1&&a.n1==c.n2?b.edge_selected_opacity:b.edge_off_opacity})}).on("mouseout",function(a,c){d.selectAll(".edge").style("stroke-opacity",b.edge_opacity)});for(var s=r.length-1;s>=0;s--){var B=JSON.parse(r[s].extra_data).predictions;for(var C in B){d3.select("#node-"+C).transition().delay(w(r[s].ts)).attr("cx",u(B[C])).duration(b.step_duration).ease("linear");for(var D=0;D<y.length;D++){if(y[D].split("-")[1]==C){var E=d3.select("#"+y[D]);E.transition().delay(w(r[s].ts)).attr("d",function(a){var b=z[y[D]],c=u(B[C]),d=b.x2,e=b.y1,f=b.y2,g=parseInt(c)+parseInt((d-c)/2);return z[y[D]]={x1:c,x2:d,y1:e,y2:f},"M"+c+","+e+"C"+g+","+e+" "+g+","+f+" "+d+","+f}).duration(b.step_duration).ease("linear")}if(y[D].split("-")[2]==C){var E=d3.select("#"+y[D]);E.transition().delay(w(r[s].ts)).attr("d",function(a){var b=z[y[D]],c=b.x1,d=u(B[C]),e=b.y1,f=b.y2,g=parseInt(c)+parseInt((d-c)/2);return z[y[D]]={x1:c,x2:d,y1:e,y2:f},"M"+c+","+e+"C"+g+","+e+" "+g+","+f+" "+d+","+f}).duration(b.step_duration).ease("linear")}}}}for(var s=0;s<h.length;s++)d3.select("#edge-"+h[s].n1+"-"+h[s].n2).transition().delay(w(g[h[s].n2].epoch)+b.step_duration+1).style("stroke-opacity",b.edge_opacity).style("stroke",b.edge_color).attr("d",function(a){var b=u(g[h[s].n1][i]),c=u(g[h[s].n2][i]),d=v(g[h[s].n1].y),e=v(g[h[s].n2].y),f=parseInt(b)+parseInt((c-b)/2);return"M"+b+","+d+"C"+f+","+d+" "+f+","+e+" "+c+","+e});for(var s=0;s<m.length;s++){var F=w(m[s].options.epoch)+b.step_duration+1;d3.select("#node-"+m[s].id).transition().delay(F).attr("stroke-opacity",b.node_opacity).attr("fill",m[s].options.color).attr("fill-opacity",m[s].options.opacity).attr("cx",u(m[s].options.epoch))}d.append("path").attr("id","timeTraveler").attr("d",function(a){var c=u(b.start),d=u(b.start),e=v(d3.min(k)),f=v(d3.max(k)),g=parseInt(c)+parseInt((d-c)/2);return"M"+c+","+e+"C"+g+","+e+" "+g+","+f+" "+d+","+f}).style("stroke","white").transition().attr("d",function(a){var c=u(b.end),d=u(b.end),e=v(d3.min(k)),f=v(d3.max(k)),g=parseInt(c)+parseInt((d-c)/2);return"M"+c+","+e+"C"+g+","+e+" "+g+","+f+" "+d+","+f}).duration(b.duration).ease("linear")},TsDashboard.prototype.drawSwimlaneChart=function(a){var b={start:null,end:null,side_margin:10,chart_div:"#divTarget",alert_color:"white",alert_opacity:.99,alert_stroke:"black",lanes_color:"#444",master_lane_color:"#444",lane_opacity:.4,lane_selected_opacity:.5,lane_height:20,alert_radius:3,alert_over_radius:10,ticks:10};if("undefined"!==a)for(var c in a)b[c]=a[c];$(b.chart_div).empty();for(var d=d3.scale.linear().domain([b.start,b.end]).range([b.side_margin,$(b.chart_div).width()-b.side_margin]),e=b.data[0],f=[],g=0;g<e.length;g++)"event_prediction"!=e[g].src&&"event_prediction_alert"!=e[g].src&&f.push({type:e[g].src,ts:new Date(e[g].ts),ts_str:e[g].ts,title:e[g].title});for(var h=[],i={},g=0;g<f.length;g++)f[g].type in i?i[f[g].type]+=1:i[f[g].type]=1;for(var j in i)h.push(j);for(var k={},g=0;g<h.length;g++)k[h[g]]=d3.select(b.chart_div).append("svg").attr("width",$(b.chart_div).width()).attr("height",b.lane_height),k[h[g]].append("rect").attr("x",0).attr("y",0).attr("width",$(b.chart_div).width()).attr("height",b.lane_height).attr("fill",b.lanes_color).attr("fill-opacity",b.lane_opacity).on("mouseover",function(a){d3.select(this).attr("fill-opacity",b.lane_selected_opacity)}).on("mouseout",function(a){d3.select(this).attr("fill-opacity",b.lane_opacity)}).append("svg:title").text(function(a){return h[g]});for(var g=0;g<h.length;g++)k[h[g]].selectAll("circle").data(f.filter(function(a){return a.type==h[g]})).enter().append("circle").attr("cy",b.lane_height/2).style("stroke",b.alert_stroke).attr("fill-opacity",b.alert_opacity).attr("cx",function(a){return d(a.ts)}).attr("r",b.alert_radius).attr("fill",b.alert_color).on("mouseover",function(a){d3.select(this).attr("r",b.alert_over_radius)}).on("mouseout",function(a){d3.select(this).attr("r",b.alert_radius)}).on("click",function(a,c){window.open("/alerts#filter=&d1="+b.start+"&fd2="+b.end,"_blank")}).append("svg:title").text(function(a,b){return"source: "+a.type+"\n"+a.title+"\n"+a.ts});d3.time.scale().domain([new Date(b.start),new Date(b.start)]).nice(d3.time.hour).range([0,$(b.chart_div).width()]),d3.select(b.chart_div).append("svg").attr("width",$(b.chart_div).width()).attr("height",b.lane_height)},TsDashboard.prototype.drawColumnChart=function(a){var b={chart_div:"#someChart",data:null,height:400,margin_bottom:60,xaccessor:function(a){return a.name},yaccessor:function(a){return a.val},ydomain_min:null,ydomain_max:null,handle_clicks:!1,x_axis_label:null,y_axis_label:null,xAxisLabelFormat:",.1f",
yFormatValue:".2s",yAxisTicks:null,tickNumber:function(a,b){return Math.min(a<100?3:8,b)},click_callback:null};if("undefined"!==a)for(var c in a)b[c]=a[c];b.ydomain||(b.ydomain=d3.extent(b.data,b.yaccessor)),null!==b.ydomain_min&&(b.ydomain[0]=b.ydomain_min),null!==b.ydomain_max&&(b.ydomain[1]=b.ydomain_max),$(b.chart_div).empty();var d={top:18,right:35,bottom:b.margin_bottom,left:50};b.x_axis_label&&(d.bottom+=20);var e=$(b.chart_div).width()-d.left-d.right,f=b.height-d.top-d.bottom,h=d3.scale.ordinal().rangeRoundBands([0,e],.1),i=d3.scale.linear().range([f,0]),j=d3.svg.axis().scale(h).orient("bottom").tickFormat(d3.format(b.xAxisLabelFormat)),k=d3.format(b.yFormatValue),l=b.tickNumber(f,b.ydomain[1]);null!=b.yAxisTicks&&(l=b.yAxisTicks);for(var m=[],n=1;n<=l;n++)m.push(b.ydomain[0]+n*(b.ydomain[1]-b.ydomain[0])/(l+1));var o=d3.svg.axis().scale(i).tickValues(m).tickFormat(function(a){return k(a)}).orient("left"),p=d3.select(b.chart_div).append("svg").attr("width",e+d.left+d.right).attr("height",f+d.top+d.bottom).append("g").attr("transform","translate("+d.left+","+d.top+")"),q=b.data;h.domain(q.map(b.xaccessor)),i.domain([0,d3.max(q,b.yaccessor)]),p.append("g").attr("class","x axis").attr("transform","translate(0,"+f+")").call(j).selectAll("text").style("text-anchor","end").attr("dx","-.8em").attr("dy",".15em").attr("transform","rotate(-45)"),p.append("g").attr("class","y axis").call(o),p.selectAll(".bar").data(q).enter().append("rect").attr("class","tsd-bar").attr("x",function(a){return h(b.xaccessor(a))}).attr("y",function(a){return i(b.yaccessor(a))}).attr("height",function(a){return f-i(b.yaccessor(a))}).attr("width",h.rangeBand()).on("mouseover",function(){d3.select(this).classed("tsd-bar-highlight",!0),r.style("display",null)}).on("mouseout",function(){d3.select(this).classed("tsd-bar-highlight",!1),r.style("display","none")}).on("mousemove",function(a){var c=d3.mouse(this)[0]-15,d=d3.mouse(this)[1]-25;r.attr("transform","translate("+c+","+d+")"),r.select("text").text(b.yaccessor(a))}),null!=b.x_axis_label&&p.append("text").attr("class","axislabel label").attr("text-anchor","end").attr("font-size","14px").attr("x",e/2).attr("y",f+d.top+32).text(b.x_axis_label),null!=b.y_axis_label&&p.append("text").attr("class","axislabel label").attr("text-anchor","end").attr("font-size","14px").attr("x",0).attr("y",15).attr("dy",".75em").attr("transform","rotate(-90)").text(b.y_axis_label);var r=p.append("g").attr("class","tsd-tooltip").style("display","none");r.append("rect").attr("width",30).attr("height",20),r.append("text").attr("x",15).attr("dy","1.2em").style("text-anchor","middle").attr("font-size","12px").attr("font-weight","bold"),b.handle_clicks&&p.on("click",function(){b.click_callback&&b.click_callback()}),q.length<=0&&g.append("text").attr("x",e/2).attr("y",f/2).attr("dy","1em").attr("text-anchor","end").text("NO DATA!").attr("class","zerolinetext")},TsDashboard.prototype.drawScatterPlot=function(a){var b={chart_div:"#someChart",data:null,height:400,xaccessor:function(a){return a.x},yaccessor:function(a){return a.y},caccessor:function(a){return a.c||""},xdomain:null,xdomain_min:null,xdomain_max:null,ydomain:null,ydomain_min:null,ydomain_max:null,ycaptions:null,handle_clicks:!1,show_grid:!0,x_axis_label:null,y_axis_label:null,graph_css:"area",xAxisFontSize:"14px",yAxisFontSize:"14px",xAxisTicks:7,yFormatValue:"s",tickNumber:function(a,b){return Math.min(a<100?3:8,b)},markerStroke:3,markerOpacity:.4,markerOpacityHover:.8,markerColor:"#ff0000",click_callback:null};if("undefined"!==a)for(var c in a)b[c]=a[c];$(b.chart_div).empty();var d={top:18,right:35,bottom:30,left:50},e=$(b.chart_div).width()-d.left-d.right,f=b.height-d.top-d.bottom,h=b.xaccessor,i=d3.scale.linear().range([0,e]),j=function(a){return i(h(a))},k=d3.svg.axis().scale(i).orient("bottom"),l=b.yaccessor,m=d3.scale.linear().range([f,0]),n=function(a){return m(l(a))},o=d3.svg.axis().scale(m).orient("left"),p=b.caccessor,q=d3.scale.category10(),r=d3.select(b.chart_div).append("svg").attr("width",e+d.left+d.right).attr("height",f+d.top+d.bottom).append("g").attr("transform","translate("+d.left+","+d.top+")"),s=d3.select("body").append("div").attr("class","tooltip").style("opacity",0),t=b.data;if(i.domain([d3.min(t,h),d3.max(t,h)]),m.domain([d3.min(t,l),d3.max(t,l)]),r.append("g").attr("class","x axis").attr("transform","translate(0,"+f+")").call(k).append("text").attr("class","label").attr("x",e).attr("y",-6).style("text-anchor","end").text(b.x_axis_label),r.append("g").attr("class","y axis").call(o).append("text").attr("class","label").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").style("text-anchor","end").text(b.y_axis_label),r.selectAll(".dot").data(t).enter().append("circle").attr("class","dot").attr("r",3.5).attr("cx",j).attr("cy",n).style("fill",function(a){return q(p(a))}).on("mouseover",function(a){s.transition().duration(200).style("opacity",.9),s.html(p(a)+"<br/> ("+h(a)+", "+l(a)+")").style("left",d3.event.pageX+5+"px").style("top",d3.event.pageY-28+"px")}).on("mouseout",function(a){s.transition().duration(500).style("opacity",0)}),q.domain.length>1){var u=r.selectAll(".legend").data(q.domain()).enter().append("g").attr("class","legend").attr("transform",function(a,b){return"translate(0,"+20*b+")"});u.append("rect").attr("x",e-18).attr("width",18).attr("height",18).style("fill",q),u.append("text").attr("x",e-24).attr("y",9).attr("dy",".35em").style("text-anchor","end").text(function(a){return a})}t.length<=0&&g.append("text").attr("x",e/2).attr("y",f/2).attr("dy","1em").attr("text-anchor","end").text("NO DATA!").attr("class","zerolinetext")},TsDashboard.prototype.drawSparklineTable=function(a){var b=this,c={chart_div:"#someChart",data:null,spark_height:15,columns:2,title_clip_prefix:null,title_clip_after:null,col_names:null,first_col_width:150};if("undefined"!==a)for(var d in a)c[d]=a[d];if(null==c.col_names){c.col_names=[];for(var e=0;e<c.columns;e++)c.col_names.push("")}var f=(d3.time.format("%d-%b-%y").parse,d3.svg.line().interpolate("linear").x(function(a){return z(a.epoch)}).y(function(a){return A(a.val)})),g=d3.svg.area().x(function(a){return z(a.epoch)}).y0(function(a){return A(a.val)}).y1(function(a){return A(0)});$(c.chart_div).empty();for(var h=c.data,i=c.columns,j=Math.floor((c.data.length-1)/i)+1,k=$("<thead></thead>"),l=$("<tr></tr>"),e=0;e<c.col_names.length;e++){var m=0==e?" style='white-space:nowrap' ":"";l.append("<th"+m+">"+c.col_names[e]+"</th>")}k.append(l);var n=$("<tbody></tbody>"),o=$('<table class="table"></table>');o.append(k),o.append(n),$(c.chart_div).append(o),$(c.chart_div).css("overflow","auto"),$(c.chart_div).css("height",c.height),$(c.chart_div).css("margin-bottom",c.margin_bottom);for(var e=0;e<=j;e++){var p=$("<tr></tr>");n.append(p);for(var q=0;q<i;q++){var r=e*i+q;if(!(r>=c.data.length)){var s=h[r].values,t=h[r].title;if(0==q){var u=t;null!=c.title_clip_after&&u.indexOf(c.title_clip_after)&&(u=u.substring(0,u.indexOf(c.title_clip_after))),null!=c.title_clip_prefix&&u.startsWith(c.title_clip_prefix)&&(u=u.substr(c.title_clip_prefix.length));var v=$("<td style='background-color:black !important; width:"+c.first_col_width+"px; word-break:break-all;'>"+u+"</td>");p.append(v)}var w=$("<td style='background-color:black !important; border-left: thin solid #282828; width:"+((o.width()-c.first_col_width)/i).toFixed()+"px;'></td>"),x=document.createElement("div");w.append(x),p.append(w);var y=w.width();s.forEach(function(a){a.date=b.toNiceDateTime(a.epoch)});var z=d3.time.scale().domain([d3.min(s,function(a){return a.epoch}),d3.max(s,function(a){return a.epoch})]).range([0,y]),A=d3.scale.linear().domain([d3.min(s,function(a){return a.val}),d3.max(s,function(a){return a.val})]).range([c.spark_height,0]),B=d3.select(x).append("svg").attr("width",y).attr("height",c.spark_height);B.append("path").attr("d",f(s)).attr("stroke","#147BB1").style("stroke-width",1),B.append("path").style("fill","#147BB1").style("fill-opacity",.8).style("stroke","none").attr("fill","#147BB1").attr("d",g(s))}}}},TsDashboardDummyDriver.prototype.getParamValues=function(a,b,c){},TsDashboardDummyDriver.prototype.onParamChange=function(a){},TsDashboardDummyDriver.prototype.registerView=function(a){this.view_object=a},TsDashboardDummyDriver.prototype.getViewDefinition=function(a){a(this.view_definition)},TsDashboardDummyDriver.prototype.getDrawData=function(a,b){b(null,this.data)};